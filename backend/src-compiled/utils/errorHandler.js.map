{"version":3,"file":"errorHandler.js","names":["_logger","require","ADMIN_CONTACT","exports","phone","email","hours","USER_MESSAGES","DATABASE_ERROR","PRODUCT_ERROR","ORDER_ERROR","PAYMENT_ERROR","AUTH_ERROR","GENERAL_ERROR","FILE_ERROR","CONNECTION_ERROR","NOT_FOUND","VALIDATION_ERROR","RATE_LIMIT_ERROR","FORBIDDEN_ERROR","TIMEOUT_ERROR","sendErrorResponse","res","error","userMessage","statusCode","additionalData","_res$req","_res$req2","_res$req3","_res$req4","_res$req5","logError","url","req","originalUrl","method","ip","userAgent","get","response","success","message","contact","timestamp","Date","toISOString","requestId","headers","now","process","env","NODE_ENV","debug","errorMessage","errorStack","stack","errorName","name","status","json","classifyError","code","messageString","toLowerCase","includes","errorHandlers","handleError","context","overrideType","errorType","handlerMap","database","handleDatabaseError","validation","handleValidationError","auth","handleAuthError","file","handleFileError","rateLimit","handleRateLimitError","forbidden","handleForbiddenError","timeout","handleTimeoutError","generic","handleGenericError","handler","enhancedContext","dbOperation","handleProductError","handleOrderError","orderStage","handlePaymentError","paymentStage","_res$req6","_res$req7","logger","warn","handleConnectionError","retryAfter","handleNotFoundError","resource","_res$req8","_res$req9","info","validationDetails","enhancedDetails","fields","Array","isArray","totalErrors","length","validation_details","globalErrorHandler","err","next","headersSent","asyncErrorHandler","fn","Promise","resolve","catch","updateContactInfo","newContact","validFields","updates","key","value","Object","entries","assign","updatedFields","keys","_default","default"],"sources":["../../src-es6/utils/errorHandler.js"],"sourcesContent":["/**\n * Centralized Error Handler for FloresYa - ES6+ Version\n * Enhanced with modern JavaScript features and better error handling\n * Provides user-friendly error messages while logging technical details\n */\n\nimport { logError, logger } from './logger.js';\n\n// Contact information for users - using const with object properties\nconst ADMIN_CONTACT = {\n    phone: '+58-XXX-XXXXXXX', // TODO: Replace with actual phone\n    email: 'admin@floresya.com',\n    hours: 'Lunes a Viernes 8:00 AM - 6:00 PM'\n};\n\n/**\n * Enhanced user-friendly error messages with ES6+ features\n */\nconst USER_MESSAGES = {\n    DATABASE_ERROR: 'Lo sentimos, ocurrió un problema con la base de datos. Por favor contacte al administrador.',\n    PRODUCT_ERROR: 'No pudimos procesar su solicitud de producto en este momento. Por favor contacte al administrador.',\n    ORDER_ERROR: 'Ocurrió un problema al procesar su pedido. Por favor contacte al administrador.',\n    PAYMENT_ERROR: 'No se pudo procesar el pago en este momento. Por favor contacte al administrador.',\n    AUTH_ERROR: 'Problema con la autenticación. Por favor contacte al administrador.',\n    GENERAL_ERROR: 'Lo sentimos, ocurrió un error inesperado. Por favor contacte al administrador.',\n    FILE_ERROR: 'No se pudo procesar el archivo. Por favor contacte al administrador.',\n    CONNECTION_ERROR: 'No se pudo establecer conexión con el servidor. Por favor contacte al administrador.',\n    NOT_FOUND: 'El recurso solicitado no fue encontrado.',\n    VALIDATION_ERROR: 'Los datos proporcionados no son válidos. Por favor revise e intente nuevamente.',\n    RATE_LIMIT_ERROR: 'Demasiadas solicitudes. Por favor espere un momento antes de intentar nuevamente.',\n    FORBIDDEN_ERROR: 'No tiene permisos para realizar esta acción.',\n    TIMEOUT_ERROR: 'La solicitud tardó demasiado en procesarse. Por favor intente nuevamente.'\n};\n\n/**\n * Enhanced error response structure using ES6+ features\n * @param {Object} res - Express response object\n * @param {Error} error - The error object\n * @param {string} userMessage - User-friendly message\n * @param {number} statusCode - HTTP status code\n * @param {Object} additionalData - Additional data to include in response\n */\nconst sendErrorResponse = (res, error, userMessage, statusCode = 500, additionalData = {}) => {\n    // Enhanced logging using our ES6+ logger\n    logError('ERROR_HANDLER', 'Error response sent', error, {\n        statusCode,\n        userMessage,\n        url: res.req?.originalUrl,\n        method: res.req?.method,\n        ip: res.req?.ip,\n        userAgent: res.req?.get('User-Agent'),\n        ...additionalData\n    });\n\n    // Enhanced response structure\n    const response = {\n        success: false,\n        message: userMessage || USER_MESSAGES.GENERAL_ERROR,\n        contact: ADMIN_CONTACT,\n        timestamp: new Date().toISOString(),\n        requestId: res.req?.headers['x-request-id'] || `req_${Date.now()}`,\n        ...additionalData\n    };\n\n    // Add error details in development\n    if (process.env.NODE_ENV === 'development') {\n        response.debug = {\n            errorMessage: error.message,\n            errorStack: error.stack,\n            errorName: error.name\n        };\n    }\n\n    res.status(statusCode).json(response);\n};\n\n/**\n * Enhanced error classification using ES6+ features\n */\nconst classifyError = (error) => {\n    const { message, name, code } = error;\n    const messageString = message?.toLowerCase() || '';\n\n    // Database error patterns\n    if (name === 'PrismaClientKnownRequestError' || \n        messageString.includes('database') || \n        messageString.includes('connection') ||\n        messageString.includes('timeout')) {\n        return 'database';\n    }\n\n    // Validation error patterns\n    if (name === 'ValidationError' || \n        messageString.includes('validation') ||\n        messageString.includes('required') ||\n        messageString.includes('invalid')) {\n        return 'validation';\n    }\n\n    // Authentication error patterns\n    if (name === 'AuthenticationError' ||\n        messageString.includes('unauthorized') ||\n        messageString.includes('authentication') ||\n        messageString.includes('token')) {\n        return 'auth';\n    }\n\n    // File processing error patterns\n    if (messageString.includes('file') ||\n        messageString.includes('upload') ||\n        messageString.includes('image')) {\n        return 'file';\n    }\n\n    // Rate limiting\n    if (code === 'RATE_LIMIT_EXCEEDED' || messageString.includes('rate limit')) {\n        return 'rateLimit';\n    }\n\n    return 'generic';\n};\n\n/**\n * Enhanced error handlers using ES6+ method shorthand and arrow functions\n */\nconst errorHandlers = {\n    // Smart error handler that auto-classifies errors\n    handleError(res, error, context = '', overrideType = null) {\n        const errorType = overrideType || classifyError(error);\n        const handlerMap = {\n            database: () => this.handleDatabaseError(res, error, context),\n            validation: () => this.handleValidationError(res, error, null, context),\n            auth: () => this.handleAuthError(res, error, context),\n            file: () => this.handleFileError(res, error, context),\n            rateLimit: () => this.handleRateLimitError(res, error, context),\n            forbidden: () => this.handleForbiddenError(res, error, context),\n            timeout: () => this.handleTimeoutError(res, error, context),\n            generic: () => this.handleGenericError(res, error, context)\n        };\n\n        const handler = handlerMap[errorType] || handlerMap.generic;\n        return handler();\n    },\n\n    // Database errors with enhanced context\n    handleDatabaseError(res, error, context = '') {\n        const enhancedContext = {\n            context: context || 'database_operation',\n            errorType: 'database',\n            dbOperation: context.includes('select') ? 'read' : \n                        context.includes('insert') ? 'create' :\n                        context.includes('update') ? 'update' :\n                        context.includes('delete') ? 'delete' : 'unknown'\n        };\n\n        sendErrorResponse(res, error, USER_MESSAGES.DATABASE_ERROR, 500, enhancedContext);\n    },\n\n    // Product related errors\n    handleProductError(res, error, context = '') {\n        sendErrorResponse(res, error, USER_MESSAGES.PRODUCT_ERROR, 500, {\n            context: context || 'product_operation',\n            errorType: 'product'\n        });\n    },\n\n    // Order processing errors with enhanced tracking\n    handleOrderError(res, error, context = '') {\n        sendErrorResponse(res, error, USER_MESSAGES.ORDER_ERROR, 500, {\n            context: context || 'order_processing',\n            errorType: 'order',\n            orderStage: context.includes('create') ? 'creation' :\n                       context.includes('update') ? 'update' :\n                       context.includes('payment') ? 'payment' : 'unknown'\n        });\n    },\n\n    // Payment processing errors\n    handlePaymentError(res, error, context = '') {\n        sendErrorResponse(res, error, USER_MESSAGES.PAYMENT_ERROR, 500, {\n            context: context || 'payment_processing',\n            errorType: 'payment',\n            paymentStage: context\n        });\n    },\n\n    // Authentication errors with enhanced security logging\n    handleAuthError(res, error, context = '') {\n        // Log security events\n        logger.warn('SECURITY', 'Authentication error occurred', {\n            context,\n            ip: res.req?.ip,\n            userAgent: res.req?.get('User-Agent'),\n            timestamp: new Date().toISOString()\n        });\n\n        sendErrorResponse(res, error, USER_MESSAGES.AUTH_ERROR, 401, {\n            context: context || 'authentication',\n            errorType: 'auth'\n        });\n    },\n\n    // File processing errors\n    handleFileError(res, error, context = '') {\n        sendErrorResponse(res, error, USER_MESSAGES.FILE_ERROR, 400, {\n            context: context || 'file_processing',\n            errorType: 'file'\n        });\n    },\n\n    // Connection errors\n    handleConnectionError(res, error, context = '') {\n        sendErrorResponse(res, error, USER_MESSAGES.CONNECTION_ERROR, 503, {\n            context: context || 'connection',\n            errorType: 'connection'\n        });\n    },\n\n    // Rate limiting errors\n    handleRateLimitError(res, error, context = '') {\n        sendErrorResponse(res, error, USER_MESSAGES.RATE_LIMIT_ERROR, 429, {\n            context: context || 'rate_limit',\n            errorType: 'rateLimit',\n            retryAfter: 60 // seconds\n        });\n    },\n\n    // Forbidden errors\n    handleForbiddenError(res, error, context = '') {\n        sendErrorResponse(res, error, USER_MESSAGES.FORBIDDEN_ERROR, 403, {\n            context: context || 'forbidden',\n            errorType: 'forbidden'\n        });\n    },\n\n    // Timeout errors\n    handleTimeoutError(res, error, context = '') {\n        sendErrorResponse(res, error, USER_MESSAGES.TIMEOUT_ERROR, 408, {\n            context: context || 'timeout',\n            errorType: 'timeout'\n        });\n    },\n\n    // Enhanced not found errors\n    handleNotFoundError(res, context = '', resource = 'resource') {\n        const response = {\n            success: false,\n            message: USER_MESSAGES.NOT_FOUND,\n            contact: ADMIN_CONTACT,\n            context: context || 'resource_not_found',\n            errorType: 'notFound',\n            resource,\n            timestamp: new Date().toISOString()\n        };\n\n        logger.info('ERROR_HANDLER', `Resource not found: ${resource}`, {\n            context,\n            url: res.req?.originalUrl,\n            method: res.req?.method\n        });\n\n        res.status(404).json(response);\n    },\n\n    // Enhanced validation errors with detailed field information\n    handleValidationError(res, error, validationDetails = null, context = '') {\n        const enhancedDetails = validationDetails ? {\n            fields: Array.isArray(validationDetails) ? validationDetails : [validationDetails],\n            totalErrors: Array.isArray(validationDetails) ? validationDetails.length : 1\n        } : null;\n\n        sendErrorResponse(res, error, USER_MESSAGES.VALIDATION_ERROR, 400, {\n            context: context || 'validation',\n            errorType: 'validation',\n            validation_details: enhancedDetails\n        });\n    },\n\n    // Generic error handler with enhanced classification\n    handleGenericError(res, error, context = '') {\n        sendErrorResponse(res, error, USER_MESSAGES.GENERAL_ERROR, 500, {\n            context: context || 'general',\n            errorType: 'generic'\n        });\n    }\n};\n\n/**\n * Enhanced middleware for unhandled errors using ES6+ features\n */\nconst globalErrorHandler = (err, req, res, next) => {\n    const { method, originalUrl, ip, headers } = req;\n    \n    // Enhanced error logging\n    logError('GLOBAL_ERROR_HANDLER', 'Unhandled error occurred', err, {\n        url: originalUrl,\n        method,\n        ip,\n        userAgent: headers['user-agent'],\n        requestId: headers['x-request-id']\n    });\n\n    if (res.headersSent) {\n        return next(err);\n    }\n\n    // Use smart error classification\n    errorHandlers.handleError(res, err, 'unhandled_error');\n};\n\n/**\n * Async error wrapper for express routes\n * Usage: app.get('/route', asyncErrorHandler(async (req, res) => { ... }))\n */\nconst asyncErrorHandler = (fn) => (req, res, next) => {\n    Promise.resolve(fn(req, res, next)).catch(next);\n};\n\n/**\n * Enhanced contact info update with validation\n */\nconst updateContactInfo = (newContact) => {\n    // Validate required fields\n    const validFields = ['phone', 'email', 'hours'];\n    const updates = {};\n    \n    for (const [key, value] of Object.entries(newContact)) {\n        if (validFields.includes(key) && typeof value === 'string') {\n            updates[key] = value;\n        }\n    }\n    \n    Object.assign(ADMIN_CONTACT, updates);\n    \n    logger.info('ERROR_HANDLER', 'Contact information updated', {\n        updatedFields: Object.keys(updates),\n        timestamp: new Date().toISOString()\n    });\n};\n\n// ES6+ exports\nexport {\n    sendErrorResponse,\n    errorHandlers,\n    globalErrorHandler,\n    asyncErrorHandler,\n    updateContactInfo,\n    classifyError,\n    USER_MESSAGES,\n    ADMIN_CONTACT\n};\n\n// Default export for main functionality\nexport default {\n    sendErrorResponse,\n    errorHandlers,\n    globalErrorHandler,\n    asyncErrorHandler,\n    updateContactInfo,\n    classifyError,\n    USER_MESSAGES,\n    ADMIN_CONTACT\n};"],"mappings":"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","ignoreList":[]}