<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="FloresYa - Tu florister√≠a en l√≠nea de confianza. Hermosos ramos, arreglos florales y plantas para toda ocasi√≥n. Entrega a domicilio en la Gran Caracas.">
    <meta name="keywords" content="flores, florister√≠a, ramos, arreglos florales, plantas, Gran Caracas, Caracas, entrega domicilio">
    <title>FloresYa - Tu Florister√≠a en L√≠nea</title>

    <!-- Critical CSS inline to prevent FOUC -->
    <style>
        /* Optimized FOUC prevention with clean design */
        html {
            visibility: hidden;
            opacity: 0;
            background-color: #ffffff;
        }
        html.loaded {
            visibility: visible;
            opacity: 1;
            transition: opacity 0.15s ease-in;
        }

        /* Critical styles for immediate clean rendering */
        body {
            margin: 0;
            padding: 0;
            background-color: #ffffff !important;
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
        }
        .navbar {
            background: linear-gradient(135deg, #db2777 0%, #ec4899 100%) !important;
        }
        .hero-section {
            background: linear-gradient(135deg, #fdf2f8 0%, #fce7f3 50%, #fdf2f8 100%);
            min-height: 300px;
        }
        h1 {
            font-size: 2.5rem !important;
            margin: 0.67em 0 !important;
            line-height: 1.2 !important;
            font-weight: 800 !important;
        }
        .hero-section h1 {
            font-size: 2.5rem !important;
            margin: 0.5em 0 !important;
            font-weight: 800 !important;
        }
        @media (max-width: 768px) {
            h1 { font-size: 2rem !important; }
        }

        /* Ensure no dark overlays during load */
        .loading-overlay,
        #cart-backdrop,
        .modal {
            opacity: 0 !important;
            visibility: hidden !important;
        }
    </style>

    <!-- Tailwind CSS from build (includes all styles) -->
    <link href="/css/styles.css" rel="stylesheet">

    <!-- FloresYa Home Enhancements -->
    <link href="/css/home-enhancements.css" rel="stylesheet">

    <!-- Preload critical resources -->
    <link rel="preload" href="/images/logoFloresYa.jpeg" as="image" importance="high">
    <link rel="modulepreload" href="/dist/frontend/utils/logger.js">
    <link rel="modulepreload" href="/dist/frontend/services/apiClient.js">
    <link rel="modulepreload" href="/dist/frontend/main.js">

    <!-- DNS prefetch for external domains -->
    <link rel="dns-prefetch" href="//cdn.jsdelivr.net">
    <link rel="dns-prefetch" href="//cdnjs.cloudflare.com">

    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@0.451.0/dist/umd/lucide.js"></script>

    <!-- Favicon -->
    <link rel="icon" type="image/x-icon" href="/images/favicon.ico">

    <!-- Open Graph Meta Tags -->
    <meta property="og:title" content="FloresYa - Tu Florister√≠a en L√≠nea">
    <meta property="og:description" content="Hermosos ramos, arreglos florales y plantas para toda ocasi√≥n. Entrega a domicilio en la Gran Caracas.">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://floresya.com">
    <meta property="og:image" content="/images/og-image.jpg">

<!-- Simplified FOUC prevention -->
<script>
    (function() {
        'use strict';

        // Simple FOUC prevention - show content when DOM is ready
        function showContent() {
            if (!document.documentElement.classList.contains('loaded')) {
                document.documentElement.classList.add('loaded');
                console.log('[‚úÖ] Content visible - FOUC prevented');
            }
        }

        // Show content when DOM is ready
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', function() {
                console.log('[üèóÔ∏è] DOM ready - showing content');
                showContent();
            });
        } else {
            // DOM already loaded
            showContent();
        }

        // Fallback timer (in case something goes wrong)
        setTimeout(function() {
            if (!document.documentElement.classList.contains('loaded')) {
                document.documentElement.classList.add('loaded');
                console.log('[‚è∞] Fallback: Content shown after timeout');
            }
        }, 2000);

    })();
</script>

</head>
<body class="bg-white min-h-screen">
    <!-- Navigation -->
    <nav class="bg-white shadow-sm sticky top-0 z-50 navbar">
        <div class="container mx-auto px-4">
            <div class="flex items-center justify-between h-16">
                <a class="flex items-center" href="/">
                    <img src="/images/logoFloresYa.jpeg" alt="FloresYa Logo" class="h-10 w-auto mr-2 logo-brand" data-critical="true" loading="eager">
                    <span class="text-xl font-bold text-primary-600">FloresYa</span>
                </a>

                <!-- Mobile menu button -->
                <button class="md:hidden inline-flex items-center justify-center p-2 rounded-md text-gray-700 hover:text-gray-900 hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-primary-500" type="button" id="mobile-menu-button">
                    <span class="sr-only">Abrir men√∫ principal</span>
                    <i data-lucide="menu" class="h-6 w-6" id="menu-icon"></i>
                    <i data-lucide="x" class="h-6 w-6 hidden" id="close-icon"></i>
                </button>

                <!-- Desktop Navigation -->
                <div class="hidden md:block" id="desktop-nav">
                    <div class="ml-10 flex items-baseline space-x-4">
                        <div class="hidden" id="logoutNavItem">
                            <a class="text-red-600 hover:text-red-800 px-3 py-2 rounded-md text-sm font-medium flex items-center" href="#" id="mainLogoutBtn" title="Cerrar sesi√≥n">
                                <i data-lucide="log-out" class="h-4 w-4 mr-1"></i>Cerrar Sesi√≥n
                            </a>
                        </div>
                    </div>

                    <div class="ml-4 flex items-center md:ml-6">
                        <!-- Cart Icon -->
                        <a class="relative p-2 text-gray-700 hover:text-primary-600 transition-colors" href="#" id="cartToggle" title="Ver carrito">
                            <i data-lucide="heart" class="h-6 w-6"></i>
                            <span class="absolute -top-1 -right-1 bg-primary-600 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center cart-badge" id="cartCount">0</span>
                            <span class="absolute -top-1 -right-1 cart-pulse" id="cartPulse"></span>
                        </a>

                        <!-- User Dropdown -->
                        <div class="ml-3 relative hidden" id="userDropdown">
                            <div>
                                <button class="flex items-center text-sm rounded-full focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500" id="user-menu-button">
                                    <i data-lucide="user-circle" class="h-8 w-8 text-gray-700"></i>
                                </button>
                            </div>
                            <div class="origin-top-right absolute right-0 mt-2 w-48 rounded-md shadow-lg py-1 bg-white ring-1 ring-black ring-opacity-5 focus:outline-none hidden" id="user-menu">
                                <a href="#" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100" id="viewProfile">Mi Perfil</a>
                                <a href="#" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100" id="viewOrders">Mis Pedidos</a>
                                <a href="/pages/admin.html" class="hidden block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100" id="adminPanel">
                                    <i data-lucide="shield-check" class="h-4 w-4 inline mr-2"></i>Panel de Administrador
                                </a>
                                <div class="border-t border-gray-100"></div>
                                <a href="#" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100" id="logoutBtn">Cerrar Sesi√≥n</a>
                            </div>
                        </div>

                        <!-- Admin Panel Link -->
                        <a class="hidden ml-3 text-gray-700 hover:text-primary-600 px-3 py-2 rounded-md text-sm font-medium flex items-center" href="/pages/admin.html" id="adminPanelLink">
                            <i data-lucide="shield-check" class="h-4 w-4 mr-1"></i>Panel Admin
                        </a>

                        <!-- Login Button -->
                        <a class="ml-3 bg-primary-600 hover:bg-primary-700 text-white px-4 py-2 rounded-md text-sm font-medium transition-colors" href="#" id="loginBtn">Iniciar Sesi√≥n</a>
                    </div>
                </div>
            </div>

            <!-- Mobile menu -->
            <div class="md:hidden hidden" id="mobile-menu">
                <div class="px-2 pt-2 pb-3 space-y-1 sm:px-3 border-t border-gray-200 mt-2">
                    <div class="hidden" id="logoutNavItemMobile">
                        <a class="text-red-600 hover:text-red-800 block px-3 py-2 rounded-md text-base font-medium flex items-center" href="#" id="mainLogoutBtnMobile">
                            <i data-lucide="log-out" class="h-4 w-4 mr-2"></i>Cerrar Sesi√≥n
                        </a>
                    </div>
                    <a class="hidden text-gray-700 hover:text-primary-600 block px-3 py-2 rounded-md text-base font-medium flex items-center" href="/pages/admin.html" id="adminPanelLinkMobile">
                        <i data-lucide="shield-check" class="h-4 w-4 mr-2"></i>Panel Admin
                    </a>
                    <a class="bg-primary-600 hover:bg-primary-700 text-white block px-3 py-2 rounded-md text-base font-medium text-center" href="#" id="loginBtnMobile">Iniciar Sesi√≥n</a>
                </div>
            </div>
        </div>
    </nav>

    <!-- Hero Section -->
    <section class="hero-section text-white text-center py-8 lg:py-12">
        <div class="container mx-auto px-4">
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-8 items-center">
                <div class="text-left lg:text-left">
                    <h1 class="text-4xl lg:text-5xl font-extrabold mb-4">Flores Frescas Para Toda Ocasi√≥n</h1>
                    <p class="text-lg lg:text-xl leading-relaxed">Descubre nuestra hermosa colecci√≥n de ramos, arreglos florales y plantas. Entrega fresca y puntual en la Gran Caracas.</p>
                </div>
                <div class="relative">
                    <img src="/images/hero-flowers.webp" alt="Hermosas flores" class="w-full max-w-sm mx-auto rounded-lg shadow-lg hover-lift" data-critical="true" width="280" height="200" loading="eager">
                    <!-- Trust indicator overlay -->
                    <div class="absolute top-4 right-4">
                        <span class="inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-green-100 text-green-800">
                            <i data-lucide="shield-check" class="h-4 w-4 mr-1"></i>Garantizado
                        </span>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Featured Products Carousel -->
    <section class="py-8">
        <div class="container mx-auto px-4">
            <div class="text-center mb-8">
                <h3 class="text-2xl lg:text-3xl font-bold text-primary-600 mb-2">Nuestras Creaciones Destacadas</h3>
                <p class="text-gray-600">Descubre nuestros arreglos m√°s populares</p>
            </div>

            <!-- Dynamic Carousel - populated by JavaScript -->
            <div id="featuredCarousel" class="carousel-container">
                <!-- Modern Indicators with Smooth Animation -->
                <div class="absolute bottom-6 left-1/2 transform -translate-x-1/2 flex space-x-3 z-20" id="carouselIndicators">
                    <!-- Dynamic indicators -->
                </div>

                <!-- Magazine Layout Slides -->
                <div class="relative overflow-hidden" id="carouselSlides">
                    <!-- Dynamic slides with premium layout -->
                </div>

                <!-- Controls -->
                <button class="absolute top-1/2 left-4 transform -translate-y-1/2 bg-white bg-opacity-80 hover:bg-opacity-100 rounded-full p-2 shadow-md transition-all z-10" type="button" id="carousel-prev">
                    <i data-lucide="chevron-left" class="h-6 w-6 text-gray-700"></i>
                    <span class="sr-only">Anterior</span>
                </button>
                <button class="absolute top-1/2 right-4 transform -translate-y-1/2 bg-white bg-opacity-80 hover:bg-opacity-100 rounded-full p-2 shadow-md transition-all z-10" type="button" id="carousel-next">
                    <i data-lucide="chevron-right" class="h-6 w-6 text-gray-700"></i>
                    <span class="sr-only">Siguiente</span>
                </button>
            </div>
        </div>
    </section>

    <!-- Featured Products -->
    <main id="main-content">
        <section id="productos" class="py-12" role="main" aria-label="Secci√≥n de productos destacados">
            <div class="container mx-auto px-4">
                <div class="text-center mb-12">
                    <h2 class="text-3xl lg:text-4xl font-bold text-gray-900 mb-4">Productos Destacados</h2>
                    <p class="text-lg text-gray-600">Nuestras flores m√°s populares y arreglos especiales</p>
                </div>

                <!-- Search and Filters -->
                <div class="grid grid-cols-1 md:grid-cols-4 gap-4 mb-8">
                    <div class="md:col-span-2">
                        <div class="relative">
                            <input type="text" class="w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500" placeholder="Buscar productos..." id="searchInput">
                            <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                                <i data-lucide="search" class="h-5 w-5 text-gray-400"></i>
                            </div>
                            <button class="absolute inset-y-0 right-0 pr-3 flex items-center text-primary-600 hover:text-primary-700" type="button" id="searchBtn">
                                <i data-lucide="search" class="h-5 w-5"></i>
                            </button>
                        </div>
                    </div>
                    <div>
                        <select class="w-full py-2 px-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500" id="occasionFilter">
                            <option value="">Todas las ocasiones</option>
                        </select>
                    </div>
                    <div>
                        <select class="w-full py-2 px-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500" id="sortFilter">
                            <option value="created_at:desc">M√°s recientes</option>
                            <option value="price_usd:asc">Precio: Menor a mayor</option>
                            <option value="price_usd:desc">Precio: Mayor a menor</option>
                            <option value="name:asc">Nombre: A-Z</option>
                        </select>
                    </div>
                </div>

                <div class="products-grid" id="productsContainer">
                    <!-- Products will be loaded here -->
                </div>

                <!-- Pagination -->
                <nav aria-label="Productos" class="mt-8">
                    <div class="flex justify-center" id="pagination">
                    </div>
                </nav>
            </div>
        </section>

        <!-- Features Section -->
        <section class="py-12 bg-gray-100">
            <div class="container mx-auto px-4">
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8 text-center">
                    <div class="space-y-4">
                        <div class="flex justify-center">
                            <i data-lucide="flower" class="h-16 w-16 text-green-600"></i>
                        </div>
                        <h5 class="text-xl font-semibold text-gray-900">Flores Frescas</h5>
                        <p class="text-gray-600">Garantizamos la frescura y calidad de todas nuestras flores</p>
                    </div>
                    <div class="space-y-4">
                        <div class="flex justify-center">
                            <i data-lucide="truck" class="h-16 w-16 text-green-600"></i>
                        </div>
                        <h5 class="text-xl font-semibold text-gray-900">Entrega R√°pida</h5>
                        <p class="text-gray-600">Entregamos en el d√≠a que elijas, puntual y seguro</p>
                    </div>
                    <div class="space-y-4">
                        <div class="flex justify-center">
                            <i data-lucide="heart" class="h-16 w-16 text-green-600"></i>
                        </div>
                        <h5 class="text-xl font-semibold text-gray-900">Hechos con Amor</h5>
                        <p class="text-gray-600">Cada arreglo es creado con dedicaci√≥n y cuidado especial</p>
                    </div>
                    <div class="space-y-4">
                        <div class="flex justify-center">
                            <i data-lucide="shield-check" class="h-16 w-16 text-green-600"></i>
                        </div>
                        <h5 class="text-xl font-semibold text-gray-900">Garant√≠a Total</h5>
                        <p class="text-gray-600">Si no est√°s satisfecho, te devolvemos tu dinero</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Special Sections Navigation - Call to Action -->
        <section class="py-12 bg-gradient-to-br from-primary-600 to-primary-700">
            <div class="container mx-auto px-4">
                <div class="text-center mb-8">
                    <h3 class="text-3xl font-bold text-white mb-4">¬øBuscas algo especial?</h3>
                    <p class="text-xl text-pink-100">Descubre nuestros servicios premium y exclusivos</p>
                </div>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <a href="#" class="block" onclick="floresyaApp.showFloresNovias()">
                        <div class="bg-white rounded-lg shadow-lg p-6 h-full flex flex-col items-center justify-center text-center hover:shadow-xl transition-shadow hover-lift">
                            <i data-lucide="heart" class="h-16 w-16 text-primary-600 mb-4"></i>
                            <h4 class="text-2xl font-bold text-primary-600 mb-3">Flores Ya Novias</h4>
                            <p class="text-gray-600 mb-4 flex-grow">Arreglos exclusivos para el d√≠a m√°s especial de tu vida</p>
                            <span class="btn-outline-primary">Conocer m√°s</span>
                        </div>
                    </a>
                    <div class="bg-white rounded-lg shadow-lg p-6 h-full flex flex-col items-center justify-center text-center hover:shadow-xl transition-shadow hover-lift">
                        <i data-lucide="zap" class="h-16 w-16 text-yellow-500 mb-4"></i>
                        <h4 class="text-2xl font-bold text-yellow-600 mb-3">Entrega Express</h4>
                        <p class="text-gray-600 mb-4 flex-grow">¬øNecesitas flores urgente? Entregamos en 2 horas</p>
                        <a href="/pages/under-construction.html" class="btn-warning">Pr√≥ximamente</a>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <!-- Floating Action Button for Mobile -->
    <button class="fixed bottom-5 right-5 bg-primary-600 hover:bg-primary-700 text-white p-4 rounded-full shadow-lg md:hidden z-40 transition-colors fab" onclick="document.getElementById('productos').scrollIntoView({behavior: 'smooth'});" title="Ver productos">
        <i data-lucide="flower" class="h-6 w-6"></i>
    </button>

    <!-- Footer -->
    <footer class="bg-gray-800 text-white py-12">
        <div class="container mx-auto px-4">
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8">
                <div class="space-y-4">
                    <h5 class="text-xl font-bold flex items-center">
                        <i data-lucide="flower" class="h-6 w-6 mr-2"></i>FloresYa
                    </h5>
                    <p class="text-gray-300">Tu florister√≠a en l√≠nea de confianza. Llevamos la belleza de las flores directamente a tu hogar.</p>
                    <div class="flex space-x-4">
                        <a href="#" class="text-gray-300 hover:text-white transition-colors">
                            <i data-lucide="facebook" class="h-6 w-6"></i>
                        </a>
                        <a href="#" class="text-gray-300 hover:text-white transition-colors">
                            <i data-lucide="instagram" class="h-6 w-6"></i>
                        </a>
                        <a href="#" class="text-gray-300 hover:text-white transition-colors">
                            <i data-lucide="twitter" class="h-6 w-6"></i>
                        </a>
                        <a href="#" class="text-gray-300 hover:text-white transition-colors">
                            <i data-lucide="message-circle" class="h-6 w-6"></i>
                        </a>
                    </div>
                </div>
                <div class="space-y-4">
                    <h6 class="font-bold text-lg">Productos</h6>
                    <ul class="space-y-2 text-gray-300">
                        <li><a href="#" class="hover:text-white transition-colors">Rosas</a></li>
                        <li><a href="#" class="hover:text-white transition-colors">Bouquets</a></li>
                        <li><a href="#" class="hover:text-white transition-colors">Plantas</a></li>
                        <li><a href="#" class="hover:text-white transition-colors">Arreglos</a></li>
                    </ul>
                </div>
                <div class="space-y-4">
                    <h6 class="font-bold text-lg">Ocasiones</h6>
                    <ul class="space-y-2 text-gray-300">
                        <li><a href="#" class="hover:text-white transition-colors" data-occasion="amor">Amor</a></li>
                        <li><a href="#" class="hover:text-white transition-colors" data-occasion="birthday">Cumplea√±os</a></li>
                        <li><a href="#" class="hover:text-white transition-colors" data-occasion="anniversary">Aniversarios</a></li>
                        <li><a href="#" class="hover:text-white transition-colors" data-occasion="mother">D√≠a de la Madre</a></li>
                    </ul>
                </div>
                <div class="space-y-4">
                    <h6 class="font-bold text-lg">Contacto</h6>
                    <div class="space-y-2 text-gray-300">
                        <p class="flex items-center">
                            <i data-lucide="map-pin" class="h-4 w-4 mr-2"></i>la Gran Caracas
                        </p>
                        <p class="flex items-center">
                            <i data-lucide="phone" class="h-4 w-4 mr-2"></i>+58412-1234567
                        </p>
                        <p class="flex items-center">
                            <i data-lucide="mail" class="h-4 w-4 mr-2"></i>contacto@floresya.com
                        </p>
                        <p class="flex items-center text-sm">
                            <i data-lucide="clock" class="h-4 w-4 mr-2"></i>
                            Lun-Vie: 8:00-18:00 | S√°b: 9:00-16:00
                        </p>
                    </div>
                </div>
            </div>
            <div class="border-t border-gray-700 mt-8 pt-8">
                <div class="flex flex-col md:flex-row justify-between items-center">
                    <p class="text-gray-300 mb-4 md:mb-0">&copy; 2024 FloresYa. Todos los derechos reservados.</p>
                    <div class="flex space-x-6">
                        <a href="#" class="text-gray-300 hover:text-white transition-colors">T√©rminos y Condiciones</a>
                        <a href="#" class="text-gray-300 hover:text-white transition-colors">Pol√≠tica de Privacidad</a>
                    </div>
                </div>
            </div>
        </div>
    </footer>

    <!-- Enhanced Shopping Cart Offcanvas -->
    <div class="fixed inset-0 overflow-hidden z-50 hidden" id="cartOffcanvas">
        <div class="absolute inset-0 overflow-hidden">
            <div class="absolute inset-0 bg-gray-500 bg-opacity-75 transition-opacity opacity-0 invisible" id="cart-backdrop"></div>
            <section class="absolute inset-y-0 right-0 pl-10 max-w-full flex">
                <div class="relative w-screen max-w-md">
                    <div class="h-full flex flex-col bg-white shadow-xl">
                        <div class="bg-gradient-to-r from-primary-600 to-primary-700 px-4 py-6 text-white">
                            <div class="flex items-center justify-between">
                                <h2 class="text-lg font-medium flex items-center">
                                    <i data-lucide="heart" class="h-5 w-5 mr-2"></i>Mi Carrito
                                </h2>
                                <button type="button" class="text-white hover:text-gray-200 transition-colors" id="cart-close">
                                    <i data-lucide="x" class="h-6 w-6"></i>
                                </button>
                            </div>
                        </div>

                        <div class="flex-1 overflow-y-auto">
                            <!-- Guest Info Banner -->
                            <div id="guestBanner" class="bg-blue-50 border border-blue-200 mx-4 mt-4 p-3 rounded-lg">
                                <div class="flex items-start">
                                    <i data-lucide="user-circle" class="h-5 w-5 text-blue-600 mr-2 mt-0.5"></i>
                                    <div>
                                        <p class="font-semibold text-blue-800">Comprando como invitado</p>
                                        <p class="text-sm text-blue-600">Puedes registrarte despu√©s para un seguimiento completo</p>
                                    </div>
                                </div>
                            </div>

                            <!-- Empty Cart State -->
                            <div id="emptyCart" class="text-center py-12 px-4">
                                <i data-lucide="shopping-bag" class="h-16 w-16 text-gray-400 mx-auto mb-4"></i>
                                <h3 class="text-lg font-medium text-gray-900 mb-2">Tu carrito est√° vac√≠o</h3>
                                <p class="text-gray-500 mb-6">¬°Agrega algunos productos para comenzar!</p>
                                <button class="btn-outline-primary" id="close-cart">
                                    Explorar productos
                                </button>
                            </div>

                            <!-- Cart Items -->
                            <div id="cartItems" class="px-4">
                                <!-- Cart items will be loaded here dynamically -->
                            </div>
                        </div>

                        <!-- Cart Footer -->
                        <div class="bg-gray-50 px-4 py-6 border-t border-gray-200">
                            <!-- Quick Actions -->
                            <div id="quickActions" class="mb-4">
                                <div class="grid grid-cols-2 gap-3">
                                    <button class="flex items-center justify-center px-3 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 transition-colors" onclick="cart.clearCart()">
                                        <i data-lucide="trash-2" class="h-4 w-4 mr-1"></i> Vaciar
                                    </button>
                                    <button class="flex items-center justify-center px-3 py-2 border border-primary-300 rounded-md text-sm font-medium text-primary-700 bg-primary-50 hover:bg-primary-100 transition-colors" onclick="cart.saveForLater()">
                                        <i data-lucide="bookmark" class="h-4 w-4 mr-1"></i> Guardar
                                    </button>
                                </div>
                            </div>

                            <!-- Subtotal -->
                            <div id="cartSummary" class="space-y-2 mb-4">
                                <div class="flex justify-between text-sm">
                                    <span>Subtotal:</span>
                                    <span id="cartSubtotal">$0.00</span>
                                </div>
                                <div class="flex justify-between text-sm text-gray-500">
                                    <span>Env√≠o:</span>
                                    <span>Gratis</span>
                                </div>
                                <div class="border-t border-gray-200 pt-2">
                                    <div class="flex justify-between font-semibold">
                                        <span>Total:</span>
                                        <span class="text-primary-600" id="cartTotal">$0.00</span>
                                    </div>
                                </div>
                            </div>

                            <!-- Action Buttons -->
                            <div id="cartActions" class="space-y-3">
                                <button class="w-full bg-primary-600 hover:bg-primary-700 text-white font-medium py-3 px-4 rounded-lg flex items-center justify-center transition-colors" id="floresyaCheckoutBtn">
                                    <i data-lucide="shopping-cart" class="h-5 w-5 mr-2"></i>FloresYa Express
                                </button>
                                <button class="w-full bg-green-600 hover:bg-green-700 text-white font-medium py-3 px-4 rounded-lg flex items-center justify-center transition-colors" id="regularCheckoutBtn">
                                    <i data-lucide="credit-card" class="h-5 w-5 mr-2"></i>Checkout Normal
                                </button>

                                <!-- Trust Indicators -->
                                <div class="text-center pt-2">
                                    <div class="flex items-center justify-center space-x-4 text-sm text-gray-500">
                                        <div class="flex items-center">
                                            <i data-lucide="shield-check" class="h-4 w-4 text-green-500 mr-1"></i>
                                            Compra segura
                                        </div>
                                        <div class="flex items-center">
                                            <i data-lucide="truck" class="h-4 w-4 text-green-500 mr-1"></i>
                                            Env√≠o gratis
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
        </div>
    </div>

    <!-- Product Detail Modal -->
    <div class="fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50 hidden" id="productModal">
        <div class="relative top-20 mx-auto p-5 border w-11/12 md:w-3/4 lg:w-1/2 shadow-lg rounded-md bg-white">
            <div class="flex justify-between items-center mb-4">
                <h3 class="text-lg font-semibold" id="productModalTitle">Detalles del Producto</h3>
                <button class="text-gray-400 hover:text-gray-600 transition-colors" id="product-modal-close">
                    <i data-lucide="x" class="h-6 w-6"></i>
                </button>
            </div>
            <div id="productModalBody">
                <!-- Product details will be loaded here -->
            </div>
        </div>
    </div>

    <!-- Login Modal -->
    <div class="fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50 hidden" id="loginModal">
        <div class="relative top-20 mx-auto p-5 border w-11/12 md:w-96 shadow-lg rounded-md bg-white">
            <div class="flex justify-between items-center mb-4">
                <h3 class="text-lg font-semibold">Iniciar Sesi√≥n</h3>
                <button class="text-gray-400 hover:text-gray-600 transition-colors" id="login-modal-close">
                    <i data-lucide="x" class="h-6 w-6"></i>
                </button>
            </div>
            <div>
                <!-- Development Quick Login Buttons -->
                <div class="bg-gray-50 p-4 rounded-lg mb-4">
                    <p class="text-sm text-gray-600 mb-3 flex items-center">
                        <i data-lucide="settings" class="h-4 w-4 mr-2"></i>Desarrollo - Acceso r√°pido:
                    </p>
                    <div class="grid grid-cols-2 gap-2">
                        <button type="button" class="flex items-center justify-center px-3 py-2 border border-primary-300 rounded-md text-sm font-medium text-primary-700 bg-white hover:bg-primary-50 transition-colors" id="devAdminLogin">
                            <i data-lucide="shield-check" class="h-4 w-4 mr-1"></i>Admin
                        </button>
                        <button type="button" class="flex items-center justify-center px-3 py-2 border border-green-300 rounded-md text-sm font-medium text-green-700 bg-white hover:bg-green-50 transition-colors" id="devClientLogin">
                            <i data-lucide="user" class="h-4 w-4 mr-1"></i>Cliente
                        </button>
                    </div>
                </div>

                <form id="loginForm" class="space-y-4">
                    <div>
                        <label for="loginEmail" class="block text-sm font-medium text-gray-700 mb-1">Email</label>
                        <input type="email" class="form-control" id="loginEmail" required>
                    </div>
                    <div>
                        <label for="loginPassword" class="block text-sm font-medium text-gray-700 mb-1">Contrase√±a</label>
                        <input type="password" class="form-control" id="loginPassword" required>
                    </div>
                    <button type="submit" class="w-full bg-green-600 hover:bg-green-700 text-white font-medium py-2 px-4 rounded-lg transition-colors">Iniciar Sesi√≥n</button>
                </form>

                <div class="text-center mt-4">
                    <p class="text-sm text-gray-600">¬øNo tienes cuenta? <a href="#" class="text-primary-600 hover:text-primary-700 font-medium" id="show-register-modal">Reg√≠strate aqu√≠</a></p>
                </div>
            </div>
        </div>
    </div>

    <!-- Register Modal -->
    <div class="fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50 hidden" id="registerModal">
        <div class="relative top-20 mx-auto p-5 border w-11/12 md:w-96 shadow-lg rounded-md bg-white">
            <div class="flex justify-between items-center mb-4">
                <h3 class="text-lg font-semibold">Crear Cuenta</h3>
                <button class="text-gray-400 hover:text-gray-600 transition-colors" id="register-modal-close">
                    <i data-lucide="x" class="h-6 w-6"></i>
                </button>
            </div>
            <div>
                <form id="registerForm" class="space-y-4">
                    <div class="grid grid-cols-2 gap-4">
                        <div>
                            <label for="firstName" class="block text-sm font-medium text-gray-700 mb-1">Nombre</label>
                            <input type="text" class="form-control" id="firstName" required>
                        </div>
                        <div>
                            <label for="lastName" class="block text-sm font-medium text-gray-700 mb-1">Apellido</label>
                            <input type="text" class="form-control" id="lastName" required>
                        </div>
                    </div>
                    <div>
                        <label for="registerEmail" class="block text-sm font-medium text-gray-700 mb-1">Email</label>
                        <input type="email" class="form-control" id="registerEmail" required>
                    </div>
                    <div>
                        <label for="phone" class="block text-sm font-medium text-gray-700 mb-1">Tel√©fono</label>
                        <input type="tel" class="form-control" id="phone" placeholder="+58414-1234567">
                    </div>
                    <div>
                        <label for="registerPassword" class="block text-sm font-medium text-gray-700 mb-1">Contrase√±a</label>
                        <input type="password" class="form-control" id="registerPassword" required>
                    </div>
                    <button type="submit" class="w-full bg-green-600 hover:bg-green-700 text-white font-medium py-2 px-4 rounded-lg transition-colors">Crear Cuenta</button>
                </form>
            </div>
        </div>
    </div>

    <!-- Flores Ya Novias Modal -->
    <div class="fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50 hidden" id="floresNoviasModal">
        <div class="relative top-10 mx-auto p-5 border w-11/12 max-w-6xl shadow-lg rounded-md bg-white">
            <div class="bg-gradient-to-r from-primary-600 to-primary-700 text-white p-6 rounded-t-md -m-5 mb-5">
                <div class="flex justify-between items-center">
                    <h2 class="text-2xl font-bold flex items-center">
                        <i data-lucide="heart" class="h-6 w-6 mr-2"></i>
                        Flores Ya Novias - Arreglos Especiales para tu Boda
                    </h2>
                    <button class="text-white hover:text-gray-200 transition-colors" id="novias-modal-close">
                        <i data-lucide="x" class="h-6 w-6"></i>
                    </button>
                </div>
            </div>

            <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                <div class="space-y-6">
                    <div class="text-center">
                        <i data-lucide="heart" class="h-16 w-16 text-primary-600 mx-auto mb-4"></i>
                        <h3 class="text-2xl font-bold text-primary-600 mb-4">Tu D√≠a Especial Merece Flores Perfectas</h3>
                        <p class="text-gray-600 mb-6">
                            En FloresYa Novias, entendemos que tu boda es el d√≠a m√°s importante de tu vida.
                            Por eso, creamos arreglos florales √∫nicos y personalizados que har√°n de tu celebraci√≥n
                            un momento inolvidable.
                        </p>
                    </div>

                    <div class="grid grid-cols-2 gap-4">
                        <div class="text-center space-y-2">
                            <i data-lucide="flower" class="h-8 w-8 text-primary-600 mx-auto"></i>
                            <h6 class="font-semibold">Ramos de Novia</h6>
                            <p class="text-sm text-gray-600">Dise√±os √∫nicos personalizados para ti</p>
                        </div>
                        <div class="text-center space-y-2">
                            <i data-lucide="gem" class="h-8 w-8 text-primary-600 mx-auto"></i>
                            <h6 class="font-semibold">Decoraci√≥n de Altares</h6>
                            <p class="text-sm text-gray-600">Ambientaci√≥n floral completa</p>
                        </div>
                        <div class="text-center space-y-2">
                            <i data-lucide="users" class="h-8 w-8 text-primary-600 mx-auto"></i>
                            <h6 class="font-semibold">Centros de Mesa</h6>
                            <p class="text-sm text-gray-600">Elegancia para cada mesa</p>
                        </div>
                        <div class="text-center space-y-2">
                            <i data-lucide="heart" class="h-8 w-8 text-primary-600 mx-auto"></i>
                            <h6 class="font-semibold">Arcos Florales</h6>
                            <p class="text-sm text-gray-600">El marco perfecto para tus votos</p>
                        </div>
                    </div>
                </div>

                <div class="bg-gray-50 p-6 rounded-lg">
                    <h4 class="text-xl font-bold text-primary-600 mb-6">Solicita tu Consulta Personalizada</h4>
                    <form id="noviasContactForm" class="space-y-4">
                        <div class="grid grid-cols-2 gap-4">
                            <div>
                                <label for="noviaName" class="block text-sm font-medium text-gray-700 mb-1">Nombre de la Novia</label>
                                <input type="text" class="form-control" id="noviaName" required>
                            </div>
                            <div>
                                <label for="noviaPhone" class="block text-sm font-medium text-gray-700 mb-1">Tel√©fono</label>
                                <input type="tel" class="form-control" id="noviaPhone" required>
                            </div>
                        </div>
                        <div>
                            <label for="noviaEmail" class="block text-sm font-medium text-gray-700 mb-1">Email</label>
                            <input type="email" class="form-control" id="noviaEmail" required>
                        </div>
                        <div class="grid grid-cols-2 gap-4">
                            <div>
                                <label for="weddingDate" class="block text-sm font-medium text-gray-700 mb-1">Fecha de Boda</label>
                                <input type="date" class="form-control" id="weddingDate" required>
                            </div>
                            <div>
                                <label for="guestCount" class="block text-sm font-medium text-gray-700 mb-1">Cantidad de Invitados</label>
                                <select class="form-select" id="guestCount" required>
                                    <option value="">Selecciona...</option>
                                    <option value="1-50">1 - 50 invitados</option>
                                    <option value="51-100">51 - 100 invitados</option>
                                    <option value="101-200">101 - 200 invitados</option>
                                    <option value="201+">M√°s de 200 invitados</option>
                                </select>
                            </div>
                        </div>
                        <div>
                            <label for="weddingVenue" class="block text-sm font-medium text-gray-700 mb-1">Lugar de Celebraci√≥n</label>
                            <input type="text" class="form-control" id="weddingVenue" placeholder="Nombre del venue o direcci√≥n">
                        </div>
                        <div>
                            <label for="noviasMessage" class="block text-sm font-medium text-gray-700 mb-1">Cu√©ntanos sobre tu boda so√±ada</label>
                            <textarea class="form-control" id="noviasMessage" rows="3" placeholder="Describe tu estilo preferido, colores, tema de la boda, etc."></textarea>
                        </div>
                        <div>
                            <label for="budget" class="block text-sm font-medium text-gray-700 mb-1">Presupuesto Aproximado (USD)</label>
                            <select class="form-select" id="budget">
                                <option value="">Prefiero no especificar</option>
                                <option value="100-300">$100 - $300</option>
                                <option value="300-600">$300 - $600</option>
                                <option value="600-1000">$600 - $1,000</option>
                                <option value="1000+">M√°s de $1,000</option>
                            </select>
                        </div>
                        <button type="submit" class="w-full bg-primary-600 hover:bg-primary-700 text-white font-medium py-3 px-4 rounded-lg flex items-center justify-center transition-colors">
                            <i data-lucide="send" class="h-5 w-5 mr-2"></i>Solicitar Consulta Gratuita
                        </button>
                    </form>
                </div>
            </div>

            <div class="mt-12">
                <h4 class="text-2xl font-bold text-primary-600 text-center mb-8">¬øPor qu√© elegir FloresYa Novias?</h4>
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 text-center">
                    <div class="space-y-3">
                        <i data-lucide="award" class="h-12 w-12 text-primary-600 mx-auto"></i>
                        <h6 class="font-semibold">10+ A√±os de Experiencia</h6>
                        <p class="text-sm text-gray-600">Especializados en bodas exclusivas</p>
                    </div>
                    <div class="space-y-3">
                        <i data-lucide="palette" class="h-12 w-12 text-primary-600 mx-auto"></i>
                        <h6 class="font-semibold">Dise√±o Personalizado</h6>
                        <p class="text-sm text-gray-600">Cada arreglo es √∫nico y hecho a medida</p>
                    </div>
                    <div class="space-y-3">
                        <i data-lucide="clock" class="h-12 w-12 text-primary-600 mx-auto"></i>
                        <h6 class="font-semibold">Puntualidad Garantizada</h6>
                        <p class="text-sm text-gray-600">Entrega perfecta el d√≠a de tu boda</p>
                    </div>
                    <div class="space-y-3">
                        <i data-lucide="headphones" class="h-12 w-12 text-primary-600 mx-auto"></i>
                        <h6 class="font-semibold">Soporte Completo</h6>
                        <p class="text-sm text-gray-600">Te acompa√±amos en cada paso</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Loading Spinner -->
    <div class="loading-overlay hidden opacity-0 invisible" id="loadingSpinner">
        <div class="animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"></div>
    </div>

    <!-- Content visibility control -->
    <script>
        // Simple content visibility control
        function ensureContentVisible() {
            if (!document.documentElement.classList.contains('loaded')) {
                document.documentElement.classList.add('loaded');
                console.log('[‚úÖ] Content visibility ensured');
            }
        }

        // Ensure content is visible when everything is loaded
        if (document.readyState === 'complete') {
            ensureContentVisible();
        } else {
            window.addEventListener('load', ensureContentVisible);
        }
    </script>

    <!-- Custom JS - Load after critical styles -->
    <!-- üå∏ FloresYa TypeScript Modules - 100% Type-Safe Frontend -->
    <script type="module" src="/dist/frontend/utils/logger.js"></script>
    <script type="module" src="/dist/frontend/services/apiClient.js"></script>
    <script type="module" src="/dist/frontend/main.js"></script>

    <!-- Authentication System -->
    <script type="module" src="/dist/frontend/authManager.js"></script>

    <!-- Scroll Effects Fix -->
    <script type="module" src="/dist/frontend/scroll-effects-fix.js"></script>

    <!-- Initialize Lucide Icons -->
    <script>
        // Initialize Lucide icons when DOM is ready
        document.addEventListener('DOMContentLoaded', function() {
            if (typeof lucide !== 'undefined') {
                lucide.createIcons();
                console.log('[‚úÖ] Lucide icons initialized');
            }
        });
    </script>

    <!-- Modal and UI Interactions -->
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Mobile menu toggle
            const mobileMenuButton = document.getElementById('mobile-menu-button');
            const mobileMenu = document.getElementById('mobile-menu');
            const menuIcon = document.getElementById('menu-icon');
            const closeIcon = document.getElementById('close-icon');

            if (mobileMenuButton) {
                mobileMenuButton.addEventListener('click', function() {
                    mobileMenu.classList.toggle('hidden');
                    menuIcon.classList.toggle('hidden');
                    closeIcon.classList.toggle('hidden');
                });
            }

            // Cart offcanvas
            const cartToggle = document.getElementById('cartToggle');
            const cartOffcanvas = document.getElementById('cartOffcanvas');
            const cartClose = document.getElementById('cart-close');
            const cartBackdrop = document.getElementById('cart-backdrop');
            const closeCart = document.getElementById('close-cart');

            function openCart() {
                cartOffcanvas.classList.remove('hidden');
                document.body.style.overflow = 'hidden';
            }

            function closeCartOffcanvas() {
                cartOffcanvas.classList.add('hidden');
                document.body.style.overflow = '';
            }

            if (cartToggle) cartToggle.addEventListener('click', openCart);
            if (cartClose) cartClose.addEventListener('click', closeCartOffcanvas);
            if (cartBackdrop) cartBackdrop.addEventListener('click', closeCartOffcanvas);
            if (closeCart) closeCart.addEventListener('click', closeCartOffcanvas);

            // Modal controls
            function createModalController(modalId, openButtonId, closeButtonId) {
                const modal = document.getElementById(modalId);
                const openBtn = document.getElementById(openButtonId);
                const closeBtn = document.getElementById(closeButtonId);

                function openModal() {
                    modal.classList.remove('hidden');
                    document.body.style.overflow = 'hidden';
                }

                function closeModal() {
                    modal.classList.add('hidden');
                    document.body.style.overflow = '';
                }

                if (openBtn) openBtn.addEventListener('click', openModal);
                if (closeBtn) closeBtn.addEventListener('click', closeModal);

                // Close on backdrop click
                modal.addEventListener('click', function(e) {
                    if (e.target === modal) closeModal();
                });

                return { openModal, closeModal };
            }

            // Initialize modals
            const loginModal = createModalController('loginModal', 'loginBtn', 'login-modal-close');
            const loginModalMobile = createModalController('loginModal', 'loginBtnMobile', 'login-modal-close');
            const registerModal = createModalController('registerModal', 'show-register-modal', 'register-modal-close');
            const productModal = createModalController('productModal', null, 'product-modal-close');
            const noviasModal = createModalController('floresNoviasModal', null, 'novias-modal-close');

            // Switch between login and register modals
            document.getElementById('show-register-modal')?.addEventListener('click', function(e) {
                e.preventDefault();
                loginModal.closeModal();
                setTimeout(() => registerModal.openModal(), 100);
            });

            // User dropdown
            const userMenuButton = document.getElementById('user-menu-button');
            const userMenu = document.getElementById('user-menu');

            if (userMenuButton && userMenu) {
                userMenuButton.addEventListener('click', function() {
                    userMenu.classList.toggle('hidden');
                });

                // Close dropdown when clicking outside
                document.addEventListener('click', function(e) {
                    if (!userMenuButton.contains(e.target) && !userMenu.contains(e.target)) {
                        userMenu.classList.add('hidden');
                    }
                });
            }
        });
    </script>

    <!-- ‚ú® Advanced Conversion Optimization Scripts ‚ú® -->
    <script>
        // Smart counter animation for social proof
        function animateCounters() {
            const counters = document.querySelectorAll('[data-counter]');
            counters.forEach(counter => {
                const target = parseInt(counter.getAttribute('data-counter'));
                let current = 0;
                const increment = target / 100;
                const timer = setInterval(() => {
                    current += increment;
                    if (current >= target) {
                        counter.textContent = target.toLocaleString() + '+';
                        clearInterval(timer);
                    } else {
                        counter.textContent = Math.floor(current).toLocaleString() + '+';
                    }
                }, 20);
            });
        }

        // Intersection Observer for animations
        const observerOptions = {
            threshold: 0.1,
            rootMargin: '0px 0px -50px 0px'
        };

        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.style.opacity = '1';
                    entry.target.style.transform = 'translateY(0)';

                    // Trigger counter animation if element has counter
                    if (entry.target.querySelector('[data-counter]')) {
                        animateCounters();
                    }
                }
            });
        }, observerOptions);

        // Observe elements for scroll animations
        document.addEventListener('DOMContentLoaded', () => {
            const animatedElements = document.querySelectorAll('.social-proof-banner, .testimonial-card');
            animatedElements.forEach(el => {
                el.style.opacity = '0';
                el.style.transform = 'translateY(30px)';
                el.style.transition = 'all 0.6s ease';
                observer.observe(el);
            });
        });

        // Optimized sticky header behavior using CSS classes to avoid scroll-linked positioning warnings
        let lastScrollY = window.scrollY;
        let scrollTicking = false;

        function updateNavbar() {
            const currentScrollY = window.scrollY;
            const navbar = document.querySelector('.navbar');

            if (currentScrollY > 100) {
                navbar.classList.add('sticky-enhanced');
            } else {
                navbar.classList.remove('sticky-enhanced');
            }

            // Use CSS classes instead of direct transform manipulation
            if (currentScrollY > lastScrollY && currentScrollY > 300) {
                navbar.classList.add('navbar-hidden');
            } else {
                navbar.classList.remove('navbar-hidden');
            }

            lastScrollY = currentScrollY;
            scrollTicking = false;
        }

        window.addEventListener('scroll', () => {
            if (!scrollTicking) {
                requestAnimationFrame(updateNavbar);
                scrollTicking = true;
            }
        });

        // Development Quick Login Functions
        function setupDevLoginButtons() {
            const adminBtn = document.getElementById('devAdminLogin');
            const clientBtn = document.getElementById('devClientLogin');

            if (adminBtn) {
                adminBtn.addEventListener('click', () => {
                    fillLoginForm('admin@floresya.com', 'admin');
                });
            }

            if (clientBtn) {
                clientBtn.addEventListener('click', () => {
                    fillLoginForm('cliente@floresya.com', 'cliente');
                });
            }
        }

        function fillLoginForm(email, password) {
            const emailField = document.getElementById('loginEmail');
            const passwordField = document.getElementById('loginPassword');
            const submitBtn = document.querySelector('#loginForm button[type="submit"]');

            if (emailField && passwordField) {
                emailField.value = email;
                passwordField.value = password;

                // Trigger input events for validation
                emailField.dispatchEvent(new Event('input', { bubbles: true }));
                passwordField.dispatchEvent(new Event('input', { bubbles: true }));

                // Auto-submit after a short delay
                setTimeout(() => {
                    if (submitBtn) {
                        submitBtn.click();
                    }
                }, 500);
            }
        }

        // Initialize dev buttons when DOM is ready
        document.addEventListener('DOMContentLoaded', setupDevLoginButtons);
    </script>

</body>
</html>