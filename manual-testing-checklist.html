<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FloresYa - Manual Testing Checklist</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css" rel="stylesheet">
    <style>
        .checklist-header {
            background: linear-gradient(135deg, #e91e63, #ec407a);
            color: white;
        }
        .test-section {
            border-left: 4px solid #e91e63;
        }
        .test-item {
            transition: background-color 0.3s;
        }
        .test-item:hover {
            background-color: #f8f9fa;
        }
        .passed {
            background-color: #d4edda !important;
            border-color: #28a745;
        }
        .failed {
            background-color: #f8d7da !important;
            border-color: #dc3545;
        }
        .progress-summary {
            position: sticky;
            top: 20px;
            z-index: 1000;
        }
        .print-section {
            display: none;
        }
        @media print {
            .no-print { display: none !important; }
            .print-section { display: block !important; }
            .test-item { page-break-inside: avoid; }
        }
    </style>
</head>
<body>
    <nav class="navbar navbar-expand-lg checklist-header">
        <div class="container">
            <span class="navbar-brand">
                <i class="bi bi-clipboard-check me-2"></i>
                FloresYa - Manual Testing Checklist
            </span>
            <div class="navbar-nav ms-auto no-print">
                <button class="btn btn-outline-light me-2" onclick="resetChecklist()">
                    <i class="bi bi-arrow-clockwise"></i> Reset
                </button>
                <button class="btn btn-light" onclick="window.print()">
                    <i class="bi bi-printer"></i> Imprimir
                </button>
            </div>
        </div>
    </nav>

    <div class="container py-4">
        <!-- Progress Summary -->
        <div class="row mb-4">
            <div class="col-12">
                <div class="card progress-summary">
                    <div class="card-body">
                        <div class="row text-center">
                            <div class="col-md-3">
                                <h4 class="text-primary mb-0" id="totalTests">0</h4>
                                <small class="text-muted">Total Tests</small>
                            </div>
                            <div class="col-md-3">
                                <h4 class="text-success mb-0" id="passedTests">0</h4>
                                <small class="text-muted">Passed</small>
                            </div>
                            <div class="col-md-3">
                                <h4 class="text-danger mb-0" id="failedTests">0</h4>
                                <small class="text-muted">Failed</small>
                            </div>
                            <div class="col-md-3">
                                <h4 class="text-warning mb-0" id="remainingTests">0</h4>
                                <small class="text-muted">Remaining</small>
                            </div>
                        </div>
                        <div class="progress mt-3" style="height: 10px;">
                            <div class="progress-bar bg-success" role="progressbar" id="progressBar" style="width: 0%"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Test Sections -->
        
        <!-- 1. Homepage Tests -->
        <div class="card mb-4 test-section">
            <div class="card-header bg-primary text-white">
                <h5 class="mb-0">
                    <i class="bi bi-house-fill me-2"></i>1. Homepage (http://localhost:3000)
                </h5>
            </div>
            <div class="card-body">
                <div class="test-item p-3 border rounded mb-2">
                    <div class="form-check">
                        <input class="form-check-input" type="checkbox" id="test_1_1">
                        <label class="form-check-label fw-bold" for="test_1_1">
                            Logo y navegación
                        </label>
                        <div class="text-muted">
                            • Logo se muestra correctamente (60px x 60px)<br>
                            • Nombre "FloresYa" visible<br>
                            • Menú de navegación funcional
                        </div>
                    </div>
                </div>

                <div class="test-item p-3 border rounded mb-2">
                    <div class="form-check">
                        <input class="form-check-input" type="checkbox" id="test_1_2">
                        <label class="form-check-label fw-bold" for="test_1_2">
                            Carousel dinámico
                        </label>
                        <div class="text-muted">
                            • Se cargan las imágenes del carousel<br>
                            • Títulos dinámicos desde settings<br>
                            • Enlaces de navegación funcionan<br>
                            • Animación de scroll funciona
                        </div>
                    </div>
                </div>

                <div class="test-item p-3 border rounded mb-2">
                    <div class="form-check">
                        <input class="form-check-input" type="checkbox" id="test_1_3">
                        <label class="form-check-label fw-bold" for="test_1_3">
                            Productos destacados
                        </label>
                        <div class="text-muted">
                            • Productos con show_on_homepage=true se muestran<br>
                            • Orden correcto según homepage_order<br>
                            • Modal de detalles funciona<br>
                            • Botón "Agregar al carrito" funciona
                        </div>
                    </div>
                </div>

                <div class="test-item p-3 border rounded mb-2">
                    <div class="form-check">
                        <input class="form-check-input" type="checkbox" id="test_1_4">
                        <label class="form-check-label fw-bold" for="test_1_4">
                            Responsive design
                        </label>
                        <div class="text-muted">
                            • Layout se adapta a móvil<br>
                            • Imágenes se redimensionan correctamente<br>
                            • Navegación móvil funciona
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- 2. Admin Panel Tests -->
        <div class="card mb-4 test-section">
            <div class="card-header bg-success text-white">
                <h5 class="mb-0">
                    <i class="bi bi-shield-check me-2"></i>2. Panel de Administración (http://localhost:3000/pages/admin.html)
                </h5>
            </div>
            <div class="card-body">
                <div class="test-item p-3 border rounded mb-2">
                    <div class="form-check">
                        <input class="form-check-input" type="checkbox" id="test_2_1">
                        <label class="form-check-label fw-bold" for="test_2_1">
                            Dashboard y navegación
                        </label>
                        <div class="text-muted">
                            • Dashboard carga correctamente<br>
                            • Menú lateral funciona<br>
                            • Cambio entre secciones funciona<br>
                            • Estadísticas se muestran
                        </div>
                    </div>
                </div>

                <div class="test-item p-3 border rounded mb-2">
                    <div class="form-check">
                        <input class="form-check-input" type="checkbox" id="test_2_2">
                        <label class="form-check-label fw-bold" for="test_2_2">
                            Gestión de productos
                        </label>
                        <div class="text-muted">
                            • Lista de productos carga<br>
                            • Agregar producto funciona<br>
                            • Editar producto funciona<br>
                            • Configurar producto en homepage funciona
                        </div>
                    </div>
                </div>

                <div class="test-item p-3 border rounded mb-2">
                    <div class="form-check">
                        <input class="form-check-input" type="checkbox" id="test_2_3">
                        <label class="form-check-label fw-bold" for="test_2_3">
                            Gestión de carousel
                        </label>
                        <div class="text-muted">
                            • Imágenes del carousel se muestran<br>
                            • Agregar imagen funciona<br>
                            • Editar imagen funciona<br>
                            • Eliminar imagen funciona<br>
                            • Cambiar orden funciona
                        </div>
                    </div>
                </div>

                <div class="test-item p-3 border rounded mb-2">
                    <div class="form-check">
                        <input class="form-check-input" type="checkbox" id="test_2_4">
                        <label class="form-check-label fw-bold" for="test_2_4">
                            Sección de Testing
                        </label>
                        <div class="text-muted">
                            • Botones de test API funcionan<br>
                            • Resultados se muestran en terminal<br>
                            • Test CSP funciona<br>
                            • Test JavaScript funciona<br>
                            • Generar reporte funciona
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- 3. API Tests -->
        <div class="card mb-4 test-section">
            <div class="card-header bg-info text-white">
                <h5 class="mb-0">
                    <i class="bi bi-server me-2"></i>3. API Endpoints
                </h5>
            </div>
            <div class="card-body">
                <div class="test-item p-3 border rounded mb-2">
                    <div class="form-check">
                        <input class="form-check-input" type="checkbox" id="test_3_1">
                        <label class="form-check-label fw-bold" for="test_3_1">
                            Health Check
                        </label>
                        <div class="text-muted">
                            • GET /api/health retorna 200 OK<br>
                            • Response contiene success: true<br>
                            • Timestamp presente
                        </div>
                    </div>
                </div>

                <div class="test-item p-3 border rounded mb-2">
                    <div class="form-check">
                        <input class="form-check-input" type="checkbox" id="test_3_2">
                        <label class="form-check-label fw-bold" for="test_3_2">
                            Products API
                        </label>
                        <div class="text-muted">
                            • GET /api/products funciona<br>
                            • GET /api/products/featured funciona<br>
                            • GET /api/products/homepage funciona<br>
                            • PUT /api/products/:id/homepage funciona
                        </div>
                    </div>
                </div>

                <div class="test-item p-3 border rounded mb-2">
                    <div class="form-check">
                        <input class="form-check-input" type="checkbox" id="test_3_3">
                        <label class="form-check-label fw-bold" for="test_3_3">
                            Carousel API
                        </label>
                        <div class="text-muted">
                            • GET /api/carousel funciona<br>
                            • GET /api/carousel/admin funciona<br>
                            • POST /api/carousel funciona<br>
                            • PUT /api/carousel/:id funciona<br>
                            • DELETE /api/carousel/:id funciona
                        </div>
                    </div>
                </div>

                <div class="test-item p-3 border rounded mb-2">
                    <div class="form-check">
                        <input class="form-check-input" type="checkbox" id="test_3_4">
                        <label class="form-check-label fw-bold" for="test_3_4">
                            Settings API
                        </label>
                        <div class="text-muted">
                            • GET /api/settings/homepage/all funciona<br>
                            • PUT /api/settings/homepage/all funciona<br>
                            • Configuraciones se reflejan en homepage
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- 4. Database Tests -->
        <div class="card mb-4 test-section">
            <div class="card-header bg-warning text-dark">
                <h5 class="mb-0">
                    <i class="bi bi-database me-2"></i>4. Base de Datos
                </h5>
            </div>
            <div class="card-body">
                <div class="test-item p-3 border rounded mb-2">
                    <div class="form-check">
                        <input class="form-check-input" type="checkbox" id="test_4_1">
                        <label class="form-check-label fw-bold" for="test_4_1">
                            Tablas y esquema
                        </label>
                        <div class="text-muted">
                            • Tabla products tiene campos show_on_homepage y homepage_order<br>
                            • Tabla carousel_images existe<br>
                            • Tabla settings tiene configuraciones homepage<br>
                            • Datos de ejemplo cargados correctamente
                        </div>
                    </div>
                </div>

                <div class="test-item p-3 border rounded mb-2">
                    <div class="form-check">
                        <input class="form-check-input" type="checkbox" id="test_4_2">
                        <label class="form-check-label fw-bold" for="test_4_2">
                            Operaciones CRUD
                        </label>
                        <div class="text-muted">
                            • Crear registros funciona<br>
                            • Leer registros funciona<br>
                            • Actualizar registros funciona<br>
                            • Eliminar registros (soft delete) funciona
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- 5. Test Browser -->
        <div class="card mb-4 test-section">
            <div class="card-header bg-secondary text-white">
                <h5 class="mb-0">
                    <i class="bi bi-bug me-2"></i>5. Test Browser (http://localhost:3000/pages/test.html)
                </h5>
            </div>
            <div class="card-body">
                <div class="test-item p-3 border rounded mb-2">
                    <div class="form-check">
                        <input class="form-check-input" type="checkbox" id="test_5_1">
                        <label class="form-check-label fw-bold" for="test_5_1">
                            Botones de navegación
                        </label>
                        <div class="text-muted">
                            • "Cargar Categorías" funciona<br>
                            • "Cargar Productos" funciona<br>
                            • "Test Filtros" funciona<br>
                            • "Test Todo" funciona<br>
                            • "Test Conexión" funciona
                        </div>
                    </div>
                </div>

                <div class="test-item p-3 border rounded mb-2">
                    <div class="form-check">
                        <input class="form-check-input" type="checkbox" id="test_5_2">
                        <label class="form-check-label fw-bold" for="test_5_2">
                            Visualización de datos
                        </label>
                        <div class="text-muted">
                            • Categorías se muestran con estadísticas<br>
                            • Productos se muestran con detalles<br>
                            • Filtros funcionan correctamente<br>
                            • Estado API se muestra correctamente
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- 6. Security & Performance -->
        <div class="card mb-4 test-section">
            <div class="card-header bg-danger text-white">
                <h5 class="mb-0">
                    <i class="bi bi-shield-lock me-2"></i>6. Seguridad y Rendimiento
                </h5>
            </div>
            <div class="card-body">
                <div class="test-item p-3 border rounded mb-2">
                    <div class="form-check">
                        <input class="form-check-input" type="checkbox" id="test_6_1">
                        <label class="form-check-label fw-bold" for="test_6_1">
                            Content Security Policy (CSP)
                        </label>
                        <div class="text-muted">
                            • onclick handlers funcionan<br>
                            • Scripts inline permitidos<br>
                            • CDN resources cargan<br>
                            • blob: URLs funcionan<br>
                            • Sin errores CSP en consola
                        </div>
                    </div>
                </div>

                <div class="test-item p-3 border rounded mb-2">
                    <div class="form-check">
                        <input class="form-check-input" type="checkbox" id="test_6_2">
                        <label class="form-check-label fw-bold" for="test_6_2">
                            Tiempo de respuesta
                        </label>
                        <div class="text-muted">
                            • APIs responden en < 500ms<br>
                            • Homepage carga en < 2 segundos<br>
                            • Admin panel carga en < 3 segundos<br>
                            • Sin timeouts en requests
                        </div>
                    </div>
                </div>

                <div class="test-item p-3 border rounded mb-2">
                    <div class="form-check">
                        <input class="form-check-input" type="checkbox" id="test_6_3">
                        <label class="form-check-label fw-bold" for="test_6_3">
                            Validación y errores
                        </label>
                        <div class="text-muted">
                            • Errores se muestran claramente<br>
                            • Validación de formularios funciona<br>
                            • Manejo de errores 404/500<br>
                            • No hay errores JavaScript en consola
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Print Section -->
        <div class="print-section mt-5">
            <h3>Resumen de Testing</h3>
            <p><strong>Fecha:</strong> <span id="printDate"></span></p>
            <p><strong>Tester:</strong> _______________________</p>
            <p><strong>Versión:</strong> 1.0.0</p>
            <p><strong>Total de pruebas:</strong> <span id="printTotal">24</span></p>
            <p><strong>Pruebas exitosas:</strong> ______ / <span id="printTotalCheck">24</span></p>
            <p><strong>Observaciones:</strong></p>
            <div style="border: 1px solid #ccc; height: 200px; margin-top: 20px;"></div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        // Initialize checklist
        document.addEventListener('DOMContentLoaded', function() {
            updateProgress();
            document.getElementById('printDate').textContent = new Date().toLocaleDateString('es-ES');
            
            // Add event listeners to all checkboxes
            const checkboxes = document.querySelectorAll('input[type="checkbox"]');
            checkboxes.forEach(checkbox => {
                checkbox.addEventListener('change', function() {
                    const testItem = this.closest('.test-item');
                    if (this.checked) {
                        testItem.classList.add('passed');
                        testItem.classList.remove('failed');
                    } else {
                        testItem.classList.remove('passed');
                    }
                    updateProgress();
                });
            });
        });

        function updateProgress() {
            const checkboxes = document.querySelectorAll('input[type="checkbox"]');
            const total = checkboxes.length;
            const passed = document.querySelectorAll('input[type="checkbox"]:checked').length;
            const failed = 0; // We don't track failed separately in this simple version
            const remaining = total - passed;
            const percentage = total > 0 ? Math.round((passed / total) * 100) : 0;

            document.getElementById('totalTests').textContent = total;
            document.getElementById('passedTests').textContent = passed;
            document.getElementById('failedTests').textContent = failed;
            document.getElementById('remainingTests').textContent = remaining;
            document.getElementById('progressBar').style.width = percentage + '%';
            document.getElementById('progressBar').textContent = percentage + '%';
        }

        function resetChecklist() {
            if (confirm('¿Estás seguro de que quieres resetear todo el checklist?')) {
                const checkboxes = document.querySelectorAll('input[type="checkbox"]');
                checkboxes.forEach(checkbox => {
                    checkbox.checked = false;
                    const testItem = checkbox.closest('.test-item');
                    testItem.classList.remove('passed', 'failed');
                });
                updateProgress();
            }
        }

        // Mark failed tests
        function markAsFailed(testId) {
            const checkbox = document.getElementById(testId);
            const testItem = checkbox.closest('.test-item');
            testItem.classList.add('failed');
            testItem.classList.remove('passed');
            checkbox.checked = false;
            updateProgress();
        }
    </script>
</body>
</html>